# -*- coding: utf-8 -*-
"""
@author: Salvatore Iacoletti
"""

import os
import time
import numpy as np
from pyvulnerability.record import Record
from pyvulnerability.opensees_runner import OpenseesRunner


if __name__ == "__main__":
    
    record_filename = 'test_motion_dt0p01.txt'
    motion_step = 0.01
    rec = np.loadtxt(record_filename)
    rec2 = Record(rec, motion_step, unit="m/s2")
    # rec2.plot_inputs()
    # rec2.plot_acc_vel_disp(unit="g")

    # SRC_LDUAL-DUH_H1 /S_LFM-DUH_H35 /CR_LDUAL-DUH_H1 # SRC_LDUAL-DUH_H1
    opr = OpenseesRunner("CR_LFINF-DUM_H2")
    opr.DEGRADATION = False
    t = time.time()
    res = opr.run(rec2.get_time_gmr(unit="m/s2", resting_time=0))
    print(time.time()-t)
    opr.plot_acc_disp()
    opr.plot_force_disp()
   
